<div id='productGallery'>
    <!-- // <script src="http://yui.yahooapis.com/3.18.1/build/yui/yui-min.js"></script> -->
    <style>

        @media only screen and (min-width: 100px) {

        }

        #gkProductGallery {
            width: 800px;
            margin: 0 auto;
        }

        .link {
            color: blue;
            display: inline-block;
            margin-right: 10px;
        }
        .link.active {
            color: lime;
        }

        .images-container {
            width: 100%;
            height: 400px;
            position: relative;
            overflow: hidden;
        }

        .image {
            position: absolute;
            opacity: 0;
            height: 400px;
            width: 100%;
            transition: opacity 0.5s ease;
        }

        .image img {
            height: 400px;
            width: 800px;
        }

        .image.active {
            opacity: 1;
        }
    </style>

    <div id='gkProductGallery'>
        <div class='links'>
            <div id='linkTemplate' class='' img-selector='' subtitle='' description=''></div>
        </div>
        <div class='images-container'>
            <div id='imageTemplate' class=''>
                <img />
            </div>
        </div>
        <div class='subtitle'></div>
        <div class='description'></div>
    </div>

    <script type='text/javascript'>
        YUI().use('io', function (Y) {
            var productGallery = {
                start : start,
                getProductJson : getProductJson,
                createDomStructure : createDomStructure,
                addEventListeners : addEventListeners,
                productJson : null,
                $container : null
            };

            function start() {
                productGallery.productJson = productGallery.getProductJson();
                productGallery.$container = document.querySelector('#productGallery');

                productGallery.createDomStructure();
                productGallery.addEventListeners();
            }

            function getProductJson() {
                Y.io('/productgallery/mb-fusion-800?format=json-pretty', {
                    on: {
                        start : function() {},
                        success: function(transactionId, repsonseObj) {
                            items = JSON.parse(repsonseObj.response);
                        },
                        complete : function() {},
                        failure : function() {},
                        end : function() {}
                    }
                });
            }

            function createDomStructure() {
                var $linksArea = productGallery.$container.querySelector('.links'),
                    $imagesArea = productGallery.$container.querySelector('.images-container'),
                    linkTemplate = productGallery.$container.querySelector('#linkTemplate'),
                    imageTemplate = productGallery.$container.querySelector('#imageTemplate');

                for(var i = 0, max = productGallery.productJson.length; i < max; i++) {
                    var linkElement = linkTemplate.cloneNode(true),
                        imageElement = imageTemplate.cloneNode(true);

                    linkElement.classList.add('link');
                    linkElement.setAttribute('img-selector', '#productGalleryImage'+ i);
                    linkElement.setAttribute('subtitle', productGallery.productJson[i].subtitleText);
                    linkElement.setAttribute('description', productGallery.productJson[i].description);

                    linkElement.innerText = productGallery.productJson[i].linkText;

                    imageElement.id = 'productGalleryImage'+ i;
                    imageElement.classList.add('image');
                    imageElement.querySelector('img').src = productGallery.productJson[i].imageUrl;

                    if(i === 0) {
                        imageElement.classList.add('active');
                        linkElement.classList.add('active');
                    }

                    $linksArea.appendChild(linkElement);
                    $imagesArea.appendChild(imageElement);
                }

                linkTemplate.parentElement.removeChild(linkTemplate);
                imageTemplate.parentElement.removeChild(imageTemplate);


            }

            function addEventListeners() {
                var subtitleNode = productGallery.$container.querySelector('.subtitle'),
                    descriptionNode = productGallery.$container.querySelector('.description'),
                    linkNodes = productGallery.$container.querySelectorAll('.link'),
                    imageNodes = productGallery.$container.querySelectorAll('.image');

                [].forEach.call(linkNodes, function(linkNode) {
                    linkNode.addEventListener('click', function() {
                        var imageSelector = linkNode.getAttribute('img-selector'),
                            subtitle = linkNode.getAttribute('subtitle'),
                            description = linkNode.getAttribute('description');

                        [].forEach.call(linkNodes, function(linkNode) {
                            linkNode.classList.remove('active');
                        });

                        [].forEach.call(imageNodes, function(imageNode) {
                            imageNode.classList.remove('active');
                        });

                        linkNode.classList.add('active');

                        productGallery.$container.querySelector(imageSelector)
                            .classList.add('active');

                        subtitleNode.innerText = subtitle;
                        descriptionNode.innerText = description;
                    });
                });
            }

            document.addEventListener('DOMContentLoaded', function() {
                productGallery.start();
            });
        });

        // window.productJson = [
        //     {
        //         linkText : 'FEATHER WEIGHT',
        //         imageUrl : 'assets/productGallery/mb_fusion/mb_fusion_800_feather_weight.jpg',
        //         subtitleText : 'Feather Weight',
        //         description : 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.'
        //     },
        //     {
        //         linkText : 'ILLUMINATION',
        //         imageUrl : 'assets/productGallery/mb_fusion/mb_fusion_800_illumination.jpg',
        //         subtitleText : 'ILLUMINATION',
        //         description : 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.'
        //     },
        //     {
        //         linkText : 'SMART KNOBS',
        //         imageUrl : 'assets/productGallery/mb_fusion/mb_fusion_800_smart_knobs.jpg',
        //         subtitleText : 'Feather Weight',
        //         description : 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.'
        //     },
        //     {
        //         linkText : 'DUAL CHANNEL FLEXIBILITY',
        //         imageUrl : 'assets/productGallery/mb_fusion/mb_fusion_800_dual_channel.jpg',
        //         subtitleText : 'Feather Weight',
        //         description : 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.'
        //     },
        //     {
        //         linkText : 'ULTRA PORTABLE POWER',
        //         imageUrl : 'assets/productGallery/mb_fusion/mb_fusion_800_tubes.jpg',
        //         subtitleText : 'Feather Weight',
        //         description : 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.'
        //     },
        //     {
        //         linkText : 'CONNECTIVITY',
        //         imageUrl : 'assets/productGallery/mb_fusion/mb_fusion_800_connectivity.jpg',
        //         subtitleText : 'Feather Weight',
        //         description : 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.'
        //     }
        // ];
    </script>
</div>
